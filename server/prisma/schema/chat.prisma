model Chat {
    id Int @id @default(autoincrement())
    type ChatType @default(PRIVATE)

    createdAt DateTime @default(now())
    
    orderId Int  @unique
    order Order?  @relation(fields: [orderId], references: [id])
    participants ChatParticipant[]
    messages Message[]
}

model Message {
    id Int @id @default(autoincrement())
    content String

    createdAt DateTime @default(now())

    userId Int
    user User @relation(fields: [userId], references: [id])
    chatId Int
    chat Chat @relation(fields: [chatId], references: [id])
}

model ChatParticipant {
    id Int @id @default(autoincrement())

    chatId Int
    chat Chat @relation(fields: [chatId], references: [id])
    userId Int
    user User @relation(fields: [userId], references: [id])

    @@unique([chatId, userId])
}

enum ChatType {
    PRIVATE  
    SUPPORT  
}